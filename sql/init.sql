CREATE TABLE UNIT
(
    "UNIT_ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    "UNITNAME" VARCHAR2(50),
    CONSTRAINT "PK_UNIT" PRIMARY KEY ("UNIT_ID")
);

CREATE TABLE SALES
(
    SALESID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    SALESTIME TIMESTAMP,
    SALESTAG NUMBER,
    EXBARBODY VARCHAR2(1000),
    PACKNAME VARCHAR2(1000),
    UNITNAME VARCHAR2(1000),
    PRICE NUMBER NOT NULL,
    BONUSPRICE NUMBER,
    QUANTITY NUMBER,
    CONSTRAINT SALES_PKEY PRIMARY KEY (SALESID)
)
    PARTITION BY HASH (SALESID)
(
    PARTITION SYS_P467 TABLESPACE SYSTEM,
    PARTITION SYS_P468 TABLESPACE SYSTEM,
    PARTITION SYS_P469 TABLESPACE SYSTEM,
    PARTITION SYS_P470 TABLESPACE SYSTEM
);


CREATE TABLE PACK
(
    "PACKID" NUMBER GENERATED BY DEFAULT AS IDENTITY,
    "UNITID" NUMBER NOT NULL,
    "PACKNAME" VARCHAR2(50),
    "PACKQUANT" NUMBER,
    "PACKTYPE" NUMBER,
    CONSTRAINT "PK_PACK" PRIMARY KEY ("PACKID"),
    CONSTRAINT "FK_PACK_UNIT" FOREIGN KEY ("UNITID") REFERENCES "UNIT" ("UNIT_ID")
);

CREATE TABLE PACKPRC
(
    "PACKID" NUMBER,
    "PACKPRICE" NUMBER NOT NULL,
    "PACKBONUS" NUMBER NOT NULL,
    CONSTRAINT "PK_PACKPRC" PRIMARY KEY ("PACKID"),
    FOREIGN KEY ("PACKID") REFERENCES "PACK" ("PACKID")
);

CREATE TABLE EXBARC
(
    "EXBARCID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    "PACKID" NUMBER NOT NULL,
    "EXBARBODY" VARCHAR2(30),
    CONSTRAINT "PK_EXBARC" PRIMARY KEY ("EXBARCID"),
    CONSTRAINT "FK_EXBARC_PACK" FOREIGN KEY ("PACKID") REFERENCES "PACK" ("PACKID")
);
CREATE INDEX "IDX_EXBARC_PACKID" ON "EXBARC" ("PACKID");


CREATE TABLE USERS
(
    "USERID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    "FIRSTNAME" VARCHAR2(50 CHAR),
    "LASTNAME" VARCHAR2(50 CHAR),
    "EMAIL" VARCHAR2(50 CHAR) NOT NULL,
    "PASSWORD" VARCHAR2(70 CHAR) NOT NULL,
    CONSTRAINT "PK_USERS" PRIMARY KEY ("USERID")
);
CREATE INDEX "IDX_USER_EMAIL" ON "USERS" ("EMAIL");



INSERT INTO unit (unitName)
SELECT 'kg' FROM DUAL
UNION ALL
SELECT 'шт' FROM DUAL;




INSERT INTO pack (packId, unitid, packName, packQuant, packType)
SELECT 1, 1, 'Яблоки', 1000, 1 FROM DUAL
UNION ALL
SELECT 2, 2, 'Вода Бонаква', 1, 0 FROM DUAL;


INSERT INTO packprc (packid, packPrice, packBonus)
SELECT 1, 120, 20 FROM DUAL
UNION ALL
SELECT 2, 130, 10 FROM DUAL;


INSERT INTO exbarc (exbarcid, packId, exbarBody)
SELECT 1, 1, '123123' FROM DUAL
UNION ALL
SELECT 2, 2, '321321' FROM DUAL;


INSERT INTO sales (salestime, salestag, exbarbody, packname, unitname, price, bonusprice, quantity)
SELECT
    TO_TIMESTAMP('2023-09-15 14:30:00', 'YYYY-MM-DD HH24:MI:SS'),
    3,
    NULL,
    NULL,
    NULL,
    0,
    0,
    NULL
FROM DUAL
UNION ALL
SELECT
    TO_TIMESTAMP('2023-09-15 14:30:00', 'YYYY-MM-DD HH24:MI:SS'),
    2,
    NULL,
    NULL,
    NULL,
    0,
    0,
    NULL
FROM DUAL
UNION ALL
SELECT
    TO_TIMESTAMP('2023-09-15 14:30:00', 'YYYY-MM-DD HH24:MI:SS'),
    1,
    NULL,
    NULL,
    NULL,
    0,
    0,
    NULL
FROM DUAL;

INSERT INTO users (firstname, lastname, email, password)
VALUES ('Alex','Cuper','oskar@mail.ru','$2a$10$tsMhV35.ySspXaXaJIaVw.1lgf56PexBUTdKD3D86biNFHkVKxKOS');
-- Пароль = 1234